{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/amirlugasi/greendb/src/lib/types.ts"],"sourcesContent":["import type { LucideIcon } from 'lucide-react';\n// Removed: import type { Timestamp } from 'firebase/firestore';\n\nexport interface Category {\n  id: string;\n  name: string;\n  icon?: string; // Store Lucide icon name as string\n}\n\nexport interface Plant {\n  id: string;\n  name:string;\n  categoryId: string; \n  category?: Category; // Optional: for client-side convenience after resolving\n  imageUrl: string;\n  height: string; \n  watering: string; \n  uses: string; \n  light: string; \n  stock: number;\n  description?: string;\n  createdAt?: Date; // Changed from Timestamp\n  updatedAt?: Date; // Changed from Timestamp\n}\n\nexport interface CartItem extends Plant {\n  quantity: number;\n}\n\nexport interface OrderItem {\n  plantId: string;\n  plantName: string;\n  quantity: number;\n  price: number; // Assuming price is always 0 for now\n}\n\nexport interface Order {\n  id: string;\n  userName: string;\n  userEmail: string;\n  userPhone: string;\n  items: OrderItem[];\n  totalItems: number;\n  totalPrice: number; \n  status: \"open\" | \"closed\" | \"canceled\";\n  createdAt: Date; // Changed from Timestamp\n  updatedAt?: Date; // Changed from Timestamp\n  whatsappMessage?: string; \n}\n\nexport interface AppSettings {\n  id?: string; // Document ID in Firestore, e.g., \"current\"\n  nurseryName: string;\n  whatsappNumber: string;\n  nurseryEmail: string;\n}\n\n// Default settings, used as a fallback or initial state\nexport const defaultSettings: AppSettings = {\n  nurseryName: \"משתלת גל-עד\",\n  whatsappNumber: \"\", // Admin should fill this via settings page\n  nurseryEmail: \"\", // Admin should fill this via settings page\n};"],"names":[],"mappings":";;;AA0DO,MAAM,kBAA+B;IAC1C,aAAa;IACb,gBAAgB;IAChB,cAAc;AAChB","debugId":null}},
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///Users/amirlugasi/greendb/src/services/mongodbService.ts"],"sourcesContent":["import { MongoClient, Db } from 'mongodb';\n\nconst MONGODB_URI = 'mongodb+srv://amir:5OPBfitlnpv4zx6h@cluster0.w5zcbbu.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0';\nconst DB_NAME = 'greendb';\n\nlet cachedClient: MongoClient | null = null;\nlet cachedDb: Db | null = null;\n\nexport async function connectToDatabase() {\n  if (cachedClient && cachedDb) {\n    return { client: cachedClient, db: cachedDb };\n  }\n\n  const client = await MongoClient.connect(MONGODB_URI);\n  const db = client.db(DB_NAME);\n\n  cachedClient = client;\n  cachedDb = db;\n\n  return { client, db };\n}\n\nexport async function getCollection(collectionName: string) {\n  const { db } = await connectToDatabase();\n  return db.collection(collectionName);\n}\n\nexport async function closeConnection() {\n  if (cachedClient) {\n    await cachedClient.close();\n    cachedClient = null;\n    cachedDb = null;\n  }\n} "],"names":[],"mappings":";;;;;AAAA;;AAEA,MAAM,cAAc;AACpB,MAAM,UAAU;AAEhB,IAAI,eAAmC;AACvC,IAAI,WAAsB;AAEnB,eAAe;IACpB,IAAI,gBAAgB,UAAU;QAC5B,OAAO;YAAE,QAAQ;YAAc,IAAI;QAAS;IAC9C;IAEA,MAAM,SAAS,MAAM,uGAAA,CAAA,cAAW,CAAC,OAAO,CAAC;IACzC,MAAM,KAAK,OAAO,EAAE,CAAC;IAErB,eAAe;IACf,WAAW;IAEX,OAAO;QAAE;QAAQ;IAAG;AACtB;AAEO,eAAe,cAAc,cAAsB;IACxD,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;IACrB,OAAO,GAAG,UAAU,CAAC;AACvB;AAEO,eAAe;IACpB,IAAI,cAAc;QAChB,MAAM,aAAa,KAAK;QACxB,eAAe;QACf,WAAW;IACb;AACF","debugId":null}},
    {"offset": {"line": 73, "column": 0}, "map": {"version":3,"sources":["file:///Users/amirlugasi/greendb/src/services/settingsService.ts"],"sourcesContent":["'use server';\n// import { db } from '@/lib/firebase'; // Firebase import removed\nimport type { AppSettings } from '@/lib/types';\nimport { defaultSettings } from '@/lib/types'; // Import default settings\nimport { getCollection } from './mongodbService';\nimport { ObjectId } from 'mongodb';\n// import { doc, getDoc, setDoc, updateDoc } from 'firebase/firestore'; // Firebase imports removed\n\n// const SETTINGS_COLLECTION = 'settings';\n// const SETTINGS_DOC_ID = 'appConfig'; // Single document for all app settings\n\ninterface MongoSettings extends AppSettings {\n  _id: ObjectId;\n}\n\nconst SETTINGS_DOC_ID = 'appConfig';\n\nfunction mapMongoSettingsToSettings(mongoSettings: MongoSettings): AppSettings {\n  const { _id, ...settingsData } = mongoSettings;\n  return settingsData;\n}\n\n// Helper to simulate server-side delay and potential errors\nconst simulateApiCall = <T>(data: T, shouldFail = false): Promise<T> => {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (shouldFail) {\n        reject(new Error(\"Simulated network error\"));\n      } else {\n        resolve(JSON.parse(JSON.stringify(data))); // Deep clone\n      }\n    }, 500);\n  });\n};\n\nexport async function getSettings(): Promise<AppSettings | null> {\n  const collection = await getCollection('settings');\n  const mongoSettings = await collection.findOne({ id: SETTINGS_DOC_ID }) as MongoSettings | null;\n  \n  if (mongoSettings) {\n    return mapMongoSettingsToSettings(mongoSettings);\n  }\n  \n  // If no settings exist, create default settings\n  const defaultMongoSettings: Omit<MongoSettings, '_id'> = {\n    ...defaultSettings,\n    id: SETTINGS_DOC_ID\n  };\n  \n  const result = await collection.insertOne(defaultMongoSettings);\n  const insertedSettings = await collection.findOne({ _id: result.insertedId }) as MongoSettings;\n  return mapMongoSettingsToSettings(insertedSettings);\n}\n\nexport async function updateSettings(settingsData: Partial<Omit<AppSettings, 'id'>>): Promise<void> {\n  const collection = await getCollection('settings');\n  const result = await collection.updateOne(\n    { id: SETTINGS_DOC_ID },\n    { $set: settingsData },\n    { upsert: true }\n  );\n  \n  if (result.matchedCount === 0 && !result.upsertedId) {\n    throw new Error(\"Failed to update settings\");\n  }\n}\n\n// Function to reset settings to default\nexport async function resetSettings(): Promise<void> {\n  const collection = await getCollection('settings');\n  await collection.updateOne(\n    { id: SETTINGS_DOC_ID },\n    { $set: { ...defaultSettings, id: SETTINGS_DOC_ID } },\n    { upsert: true }\n  );\n}"],"names":[],"mappings":";;;;;;;AAGA,wMAA+C,0BAA0B;AACzE;;;;;;AAWA,MAAM,kBAAkB;AAExB,SAAS,2BAA2B,aAA4B;IAC9D,MAAM,EAAE,GAAG,EAAE,GAAG,cAAc,GAAG;IACjC,OAAO;AACT;AAEA,4DAA4D;AAC5D,MAAM,kBAAkB,CAAI,MAAS,aAAa,KAAK;IACrD,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC3B,WAAW;YACT,IAAI,YAAY;gBACd,OAAO,IAAI,MAAM;YACnB,OAAO;gBACL,QAAQ,KAAK,KAAK,CAAC,KAAK,SAAS,CAAC,SAAS,aAAa;YAC1D;QACF,GAAG;IACL;AACF;AAEO,eAAe,uCAAS,GAAT;IACpB,MAAM,aAAa,MAAM,CAAA,GAAA,iIAAA,CAAA,gBAAa,AAAD,EAAE;IACvC,MAAM,gBAAgB,MAAM,WAAW,OAAO,CAAC;QAAE,IAAI;IAAgB;IAErE,IAAI,eAAe;QACjB,OAAO,2BAA2B;IACpC;IAEA,gDAAgD;IAChD,MAAM,uBAAmD;QACvD,GAAG,mHAAA,CAAA,kBAAe;QAClB,IAAI;IACN;IAEA,MAAM,SAAS,MAAM,WAAW,SAAS,CAAC;IAC1C,MAAM,mBAAmB,MAAM,WAAW,OAAO,CAAC;QAAE,KAAK,OAAO,UAAU;IAAC;IAC3E,OAAO,2BAA2B;AACpC;AAEO,eAAe,uCAAY,GAAZ,eAAe,YAA8C;IACjF,MAAM,aAAa,MAAM,CAAA,GAAA,iIAAA,CAAA,gBAAa,AAAD,EAAE;IACvC,MAAM,SAAS,MAAM,WAAW,SAAS,CACvC;QAAE,IAAI;IAAgB,GACtB;QAAE,MAAM;IAAa,GACrB;QAAE,QAAQ;IAAK;IAGjB,IAAI,OAAO,YAAY,KAAK,KAAK,CAAC,OAAO,UAAU,EAAE;QACnD,MAAM,IAAI,MAAM;IAClB;AACF;AAGO,eAAe,uCAAW,GAAX;IACpB,MAAM,aAAa,MAAM,CAAA,GAAA,iIAAA,CAAA,gBAAa,AAAD,EAAE;IACvC,MAAM,WAAW,SAAS,CACxB;QAAE,IAAI;IAAgB,GACtB;QAAE,MAAM;YAAE,GAAG,mHAAA,CAAA,kBAAe;YAAE,IAAI;QAAgB;IAAE,GACpD;QAAE,QAAQ;IAAK;AAEnB;;;IAxCsB;IAmBA;IAcA;;AAjCA,+OAAA;AAmBA,+OAAA;AAcA,+OAAA","debugId":null}},
    {"offset": {"line": 164, "column": 0}, "map": {"version":3,"sources":["file:///Users/amirlugasi/greendb/src/services/orderService.ts"],"sourcesContent":["'use server';\n// import { db } from '@/lib/firebase'; // Firebase import removed\nimport type { Order, OrderItem } from '@/lib/types';\nimport { getCollection } from './mongodbService';\nimport { ObjectId } from 'mongodb';\n// import { collection, getDocs, addDoc, doc, updateDoc, query, orderBy, Timestamp, serverTimestamp } from 'firebase/firestore';\n\n// const ORDERS_COLLECTION = 'orders';\n\ninterface MongoOrder extends Order {\n  _id: ObjectId;\n}\n\nfunction mapMongoOrderToOrder(mongoOrder: MongoOrder): Order {\n  const { _id, ...orderData } = mongoOrder;\n  return orderData;\n}\n\n// Mock data for demonstration purposes\nlet mockOrders: Order[] = [];\n\n// Helper to simulate server-side delay and potential errors\nconst simulateApiCall = <T>(data: T, shouldFail = false): Promise<T> => {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (shouldFail) {\n        reject(new Error(\"Simulated network error\"));\n      } else {\n        resolve(JSON.parse(JSON.stringify(data))); // Deep clone for objects/arrays\n      }\n    }, 500);\n  });\n};\n\nexport async function getOrders(): Promise<Order[]> {\n  const collection = await getCollection('orders');\n  const mongoOrders = await collection.find({}).sort({ createdAt: -1 }).toArray() as MongoOrder[];\n  return mongoOrders.map(mapMongoOrderToOrder);\n}\n\nexport async function addOrder(orderData: Omit<Order, 'id' | 'createdAt' | 'updatedAt'>): Promise<Order> {\n  const collection = await getCollection('orders');\n  const newOrder: Omit<MongoOrder, '_id'> = {\n    ...orderData,\n    id: `order_${Date.now()}`,\n    createdAt: new Date(),\n    updatedAt: new Date(),\n  };\n  \n  const result = await collection.insertOne(newOrder);\n  const insertedOrder = await collection.findOne({ _id: result.insertedId }) as MongoOrder;\n  return mapMongoOrderToOrder(insertedOrder);\n}\n\nexport async function updateOrderStatus(orderId: string, status: Order['status']): Promise<void> {\n  const collection = await getCollection('orders');\n  const result = await collection.updateOne(\n    { id: orderId },\n    { \n      $set: { \n        status,\n        updatedAt: new Date()\n      }\n    }\n  );\n  \n  if (result.matchedCount === 0) {\n    throw new Error(\"Order not found\");\n  }\n}\n\nexport async function getOrderById(orderId: string): Promise<Order | null> {\n  const collection = await getCollection('orders');\n  const mongoOrder = await collection.findOne({ id: orderId }) as MongoOrder | null;\n  return mongoOrder ? mapMongoOrderToOrder(mongoOrder) : null;\n}\n\nexport async function deleteOrder(orderId: string): Promise<void> {\n  const collection = await getCollection('orders');\n  const result = await collection.deleteOne({ id: orderId });\n  \n  if (result.deletedCount === 0) {\n    throw new Error(\"Order not found for deletion\");\n  }\n}\n\n// Function to initialize mock orders if needed for testing\nexport async function initializeMockOrders(orders: Order[]): Promise<void> {\n  mockOrders = orders.map(order => ({\n    ...order,\n    // Ensure createdAt is a Date object if it's coming from JSON/Timestamp-like structure\n    createdAt: order.createdAt ? new Date((order.createdAt as any).seconds ? (order.createdAt as any).seconds * 1000 : order.createdAt) : new Date(),\n    updatedAt: order.updatedAt ? new Date((order.updatedAt as any).seconds ? (order.updatedAt as any).seconds * 1000 : order.updatedAt) : new Date(),\n  }));\n  console.log(\"Mock orders initialized.\");\n}"],"names":[],"mappings":";;;;;;;;;;AAGA;;;;;AAUA,SAAS,qBAAqB,UAAsB;IAClD,MAAM,EAAE,GAAG,EAAE,GAAG,WAAW,GAAG;IAC9B,OAAO;AACT;AAEA,uCAAuC;AACvC,IAAI,aAAsB,EAAE;AAE5B,4DAA4D;AAC5D,MAAM,kBAAkB,CAAI,MAAS,aAAa,KAAK;IACrD,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC3B,WAAW;YACT,IAAI,YAAY;gBACd,OAAO,IAAI,MAAM;YACnB,OAAO;gBACL,QAAQ,KAAK,KAAK,CAAC,KAAK,SAAS,CAAC,SAAS,gCAAgC;YAC7E;QACF,GAAG;IACL;AACF;AAEO,eAAe,uCAAO,GAAP;IACpB,MAAM,aAAa,MAAM,CAAA,GAAA,iIAAA,CAAA,gBAAa,AAAD,EAAE;IACvC,MAAM,cAAc,MAAM,WAAW,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC;QAAE,WAAW,CAAC;IAAE,GAAG,OAAO;IAC7E,OAAO,YAAY,GAAG,CAAC;AACzB;AAEO,eAAe,uCAAM,GAAN,SAAS,SAAwD;IACrF,MAAM,aAAa,MAAM,CAAA,GAAA,iIAAA,CAAA,gBAAa,AAAD,EAAE;IACvC,MAAM,WAAoC;QACxC,GAAG,SAAS;QACZ,IAAI,CAAC,MAAM,EAAE,KAAK,GAAG,IAAI;QACzB,WAAW,IAAI;QACf,WAAW,IAAI;IACjB;IAEA,MAAM,SAAS,MAAM,WAAW,SAAS,CAAC;IAC1C,MAAM,gBAAgB,MAAM,WAAW,OAAO,CAAC;QAAE,KAAK,OAAO,UAAU;IAAC;IACxE,OAAO,qBAAqB;AAC9B;AAEO,eAAe,uCAAe,GAAf,kBAAkB,OAAe,EAAE,MAAuB;IAC9E,MAAM,aAAa,MAAM,CAAA,GAAA,iIAAA,CAAA,gBAAa,AAAD,EAAE;IACvC,MAAM,SAAS,MAAM,WAAW,SAAS,CACvC;QAAE,IAAI;IAAQ,GACd;QACE,MAAM;YACJ;YACA,WAAW,IAAI;QACjB;IACF;IAGF,IAAI,OAAO,YAAY,KAAK,GAAG;QAC7B,MAAM,IAAI,MAAM;IAClB;AACF;AAEO,eAAe,uCAAU,GAAV,aAAa,OAAe;IAChD,MAAM,aAAa,MAAM,CAAA,GAAA,iIAAA,CAAA,gBAAa,AAAD,EAAE;IACvC,MAAM,aAAa,MAAM,WAAW,OAAO,CAAC;QAAE,IAAI;IAAQ;IAC1D,OAAO,aAAa,qBAAqB,cAAc;AACzD;AAEO,eAAe,uCAAS,GAAT,YAAY,OAAe;IAC/C,MAAM,aAAa,MAAM,CAAA,GAAA,iIAAA,CAAA,gBAAa,AAAD,EAAE;IACvC,MAAM,SAAS,MAAM,WAAW,SAAS,CAAC;QAAE,IAAI;IAAQ;IAExD,IAAI,OAAO,YAAY,KAAK,GAAG;QAC7B,MAAM,IAAI,MAAM;IAClB;AACF;AAGO,eAAe,uCAAkB,GAAlB,qBAAqB,MAAe;IACxD,aAAa,OAAO,GAAG,CAAC,CAAA,QAAS,CAAC;YAChC,GAAG,KAAK;YACR,sFAAsF;YACtF,WAAW,MAAM,SAAS,GAAG,IAAI,KAAK,AAAC,MAAM,SAAS,CAAS,OAAO,GAAG,AAAC,MAAM,SAAS,CAAS,OAAO,GAAG,OAAO,MAAM,SAAS,IAAI,IAAI;YAC1I,WAAW,MAAM,SAAS,GAAG,IAAI,KAAK,AAAC,MAAM,SAAS,CAAS,OAAO,GAAG,AAAC,MAAM,SAAS,CAAS,OAAO,GAAG,OAAO,MAAM,SAAS,IAAI,IAAI;QAC5I,CAAC;IACD,QAAQ,GAAG,CAAC;AACd;;;IA7DsB;IAMA;IAcA;IAiBA;IAMA;IAUA;;AArDA,+OAAA;AAMA,+OAAA;AAcA,+OAAA;AAiBA,+OAAA;AAMA,+OAAA;AAUA,+OAAA","debugId":null}},
    {"offset": {"line": 278, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 361, "column": 0}, "map": {"version":3,"sources":["file:///Users/amirlugasi/greendb/src/app/admin/orders/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/admin/orders/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/admin/orders/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAiS,GAC9T,+DACA","debugId":null}},
    {"offset": {"line": 375, "column": 0}, "map": {"version":3,"sources":["file:///Users/amirlugasi/greendb/src/app/admin/orders/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/admin/orders/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/admin/orders/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA6Q,GAC1S,2CACA","debugId":null}},
    {"offset": {"line": 389, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}